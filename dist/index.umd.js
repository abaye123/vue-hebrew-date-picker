(function(y,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("jewish-date"),require("dayjs")):typeof define=="function"&&define.amd?define(["exports","vue","jewish-date","dayjs"],e):(y=typeof globalThis<"u"?globalThis:y||self,e(y.VueHebrewDatePicker={},y.Vue,y.JewishDate,y.dayjs))})(this,(function(y,e,d,M){"use strict";const A=()=>["א","ב","ג","ד","ה","ו","ש"],L=()=>["Su","Mo","Tu","We","Th","Fr","Sa"],x=n=>n?A():L(),V=(n,t)=>d.getJewishMonthsInOrder(n).slice(1).map(s=>({id:s,text:t?d.getJewishMonthInHebrew(d.JewishMonth[s]):s})),_=(n=5785)=>{const t=[];for(let a=100;a>0;a--){const s=n-a;t.push(s)}t.push(n);for(let a=1;a<=100;a++){const s=n+a;t.push(s)}return t},$=(n,t)=>{const a=V(t,!1),s=a.map(h=>h.id).indexOf(d.JewishMonth[n]);return s===0?{month:d.JewishMonth[a[a.length-1].id],year:t-1}:{month:d.JewishMonth[a[s-1].id],year:t}},I=(n,t)=>{const a=V(t,!1),s=a.map(h=>h.id).indexOf(d.JewishMonth[n]);return s===a.length-1?{month:d.JewishMonth[a[0].id],year:t+1}:{month:d.JewishMonth[a[s+1].id],year:t}},J=n=>{if(!n||n.monthName===d.JewishMonth.None||n.year<1||n.day<1)return new Date;const t={day:n.day,monthName:n.monthName,year:n.year};return d.toGregorianDate(t)},B=n=>d.toJewishDate(n),O=(n,t)=>n&&t&&n.day===t.day&&n.month===t.month&&n.year===t.year,T=n=>{const t=B(n.toDate());return{day:t.day,jewishDateStr:d.formatJewishDate(t),jewishDateStrHebrew:d.formatJewishDateInHebrew(t),jewishDate:t,dayjsDate:n,date:n.toDate(),isCurrentMonth:!1}},z=n=>{const t=B(n),a=M(n).subtract(t.day-1,"day"),s=Number(a.format("d")),h=a.subtract(s,"day"),D={selectedDay:null,jewishMonth:t.month,jewishYear:t.year,jewishMonthString:t.monthName,days:[]};let f=h;for(let c=0;c<42;c++){const l=T(f);l.isCurrentMonth=D.jewishMonth===l.jewishDate.month,O(t,l.jewishDate)&&(D.selectedDay=l),(c<7||l.isCurrentMonth||l.date.getDay()>0)&&(D.days.push(l),f=f.add(1,"day"))}return D},Y=n=>{const t=["1 Tishri","2 Tishri","10 Tishri","15 Tishri","22 Tishri","15 Nisan","21 Nisan","6 Sivan"];return n||t.push("16 Tishri","23 Tishri","16 Nisan","22 Nisan","7 Sivan"),t},F=n=>{const t=Y(n??!1);return a=>!t.includes(`${a.jewishDate.day} ${a.jewishDate.monthName}`)},j=n=>n.date.getDay()!==6,G=n=>t=>j(t)&&F(n)(t);function U(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var R={exports:{}},K=R.exports,P;function Q(){return P||(P=1,(function(n,t){(function(a,s){n.exports=s()})(K,(function(){return function(a,s,h){s.prototype.isBetween=function(D,f,c,l){var S=h(D),g=h(f),p=(l=l||"()")[0]==="(",u=l[1]===")";return(p?this.isAfter(S,c):!this.isBefore(S,c))&&(u?this.isBefore(g,c):!this.isAfter(g,c))||(p?this.isBefore(S,c):!this.isAfter(S,c))&&(u?this.isAfter(g,c):!this.isBefore(g,c))}}}))})(R)),R.exports}var X=Q();const Z=U(X),ee=["title"],te=e.defineComponent({__name:"Day",props:{day:{},isHebrew:{type:Boolean},selectedDay:{},onClick:{type:Function},onMouseOver:{type:Function},canSelect:{type:Function},customizeDayStyle:{type:Function},isRange:{type:Boolean},startDay:{},endDay:{}},setup(n){M.extend(Z);const t=n,a=e.computed(()=>t.isHebrew?d.convertNumberToHebrew(t.day.day,!1,!1):t.day.day),s=e.computed(()=>t.isHebrew?t.day.jewishDateStrHebrew:t.day.jewishDateStr),h=e.computed(()=>t.day.isCurrentMonth?"":"other-month"),D=e.computed(()=>t.selectedDay&&O(t.day.jewishDate,t.selectedDay.jewishDate)?"selected-day":""),f=e.computed(()=>t.canSelect&&!t.canSelect(t.day)?"no-select":""),c=(i,r,m)=>{if(r&&m){const b=M(r.date),E=M(m.date);return M(i).isBetween(b,E,"day","[]")}return!1},l=(i,r)=>{if(r){const m=M(r.date).startOf("d");return M(i).startOf("d").isSame(m)}return!1},S=(i,r,m)=>{if(m&&r){const b=M(i).startOf("d"),E=M(r.date).startOf("d"),o=M(m.date).startOf("d");return b.isSame(o)&&!b.isSame(E)}return!1},g=e.computed(()=>c(t.day.date,t.startDay,t.endDay)?"is-in-range":""),p=e.computed(()=>l(t.day.date,t.startDay)?"start-day":""),u=e.computed(()=>S(t.day.date,t.startDay,t.endDay)?"end-day":""),w=e.computed(()=>t.customizeDayStyle?t.customizeDayStyle(t.day):""),k=e.computed(()=>["day",h.value,D.value,f.value,g.value,p.value,u.value,w.value].filter(Boolean).join(" ")),N=()=>{(!t.canSelect||t.canSelect(t.day))&&t.onClick(t.day)},C=()=>{t.onMouseOver&&t.onMouseOver(t.day)};return(i,r)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(k.value),title:s.value,onClick:N,onMouseover:C},e.toDisplayString(a.value),43,ee))}}),ne={class:"weekday"},ae=e.defineComponent({__name:"Weekday",props:{value:{}},setup(n){return(t,a)=>(e.openBlock(),e.createElementBlock("div",ne,e.toDisplayString(n.value),1))}}),se={class:"navigation"},oe={class:"month-year-selection"},re=["value"],ie=["value"],ce=["value"],le=["value"],de=e.defineComponent({__name:"Navigation",props:{month:{},year:{},isHebrew:{type:Boolean}},emits:["click"],setup(n,{emit:t}){const a=n,s=t,h=e.computed(()=>V(a.year,a.isHebrew)),D=e.computed(()=>_(a.year)),f=u=>d.JewishMonth[u],c=()=>{const u=f(a.month),w=$(u,a.year);s("click",d.JewishMonth[w.month],w.year)},l=()=>{const u=f(a.month),w=I(u,a.year);s("click",d.JewishMonth[w.month],w.year)},S=u=>{const w=u.target;s("click",w.value,a.year)},g=u=>{const w=u.target;s("click",a.month,Number(w.value))},p=u=>a.isHebrew?d.convertNumberToHebrew(u):u;return(u,w)=>(e.openBlock(),e.createElementBlock("div",se,[e.createElementVNode("div",{class:"arrow-left",onClick:c},[...w[0]||(w[0]=[e.createElementVNode("span",null,null,-1)])]),e.createElementVNode("div",oe,[e.createElementVNode("select",{value:n.month,onChange:S},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(h.value,k=>(e.openBlock(),e.createElementBlock("option",{key:k.id,value:k.id},e.toDisplayString(k.text),9,ie))),128))],40,re),e.createElementVNode("select",{value:n.year,onChange:g},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(D.value,k=>(e.openBlock(),e.createElementBlock("option",{key:k,value:k},e.toDisplayString(p(k)),9,le))),128))],40,ce)]),e.createElementVNode("div",{class:"arrow-right",onClick:l},[...w[1]||(w[1]=[e.createElementVNode("span",null,null,-1)])])]))}}),ue={class:"weekday-wrapper"},he={class:"month"},me=e.defineComponent({__name:"Month",props:{value:{},isHebrew:{type:Boolean},isRange:{type:Boolean},canSelect:{type:Function},customizeDayStyle:{type:Function}},emits:["select"],setup(n,{emit:t}){const a=n,s=t,h=o=>o?o instanceof Date?o:o.startDate?o.startDate instanceof Date?o.startDate:J(o.startDate):o.day&&o.monthName&&o.year?J(o):new Date:new Date,D=o=>o&&typeof o=="object"&&"startDate"in o&&"endDate"in o,f=e.ref(h(a.value)),c=e.computed(()=>D(a.value)?h(a.value.endDate):null),l=e.computed(()=>z(f.value)),S=e.computed(()=>{if(!a.isRange&&a.value&&!D(a.value))return l.value.selectedDay||void 0}),g=e.computed(()=>{if(a.isRange&&D(a.value)){const o=h(a.value.startDate);return T(M(o))}}),p=e.computed(()=>{if(a.isRange&&D(a.value)&&c.value)return T(M(c.value))}),u=e.ref(void 0),w=e.computed(()=>{if(a.isRange)return p.value?g.value:u.value}),k=e.computed(()=>{if(a.isRange)return p.value||u.value}),N=e.computed(()=>x(a.isHebrew||!1)),C=e.computed(()=>`month-container${a.isHebrew?" is-hebrew":""}`),i=(o,v)=>{var q;const H=((q=l.value.selectedDay)==null?void 0:q.day)||1,we={year:v,monthName:d.JewishMonth[o],day:H},De=J(we);f.value=De},r=(o,v)=>{i(o,v)},m=o=>{if(a.isRange)if(!g.value||p.value)s("select",o,void 0);else{const[v,H]=E(g.value,o);s("select",v,H)}else s("select",o,void 0)},b=o=>{a.isRange&&(u.value=o)},E=(o,v)=>o.date.getTime()<=v.date.getTime()?[o,v]:[v,o];return e.watch(()=>a.value,o=>{const v=h(o);f.value=v}),(o,v)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(C.value)},[e.createVNode(de,{month:l.value.jewishMonthString,year:l.value.jewishYear,"is-hebrew":n.isHebrew,onClick:r},null,8,["month","year","is-hebrew"]),e.createElementVNode("div",ue,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(N.value,H=>(e.openBlock(),e.createBlock(ae,{key:H,value:H},null,8,["value"]))),128))]),e.createElementVNode("div",he,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value.days,H=>(e.openBlock(),e.createBlock(te,{key:H.jewishDateStr,day:H,"is-hebrew":n.isHebrew,"selected-day":S.value,"can-select":n.canSelect,"customize-day-style":n.customizeDayStyle,"is-range":n.isRange,"start-day":w.value,"end-day":k.value,onClick:m,onMouseover:b},null,8,["day","is-hebrew","selected-day","can-select","customize-day-style","is-range","start-day","end-day"]))),128))])],2))}}),ye={class:"selected-date-text"},W=e.defineComponent({__name:"HebrewDatePicker",props:{modelValue:{},isHebrew:{type:Boolean},canSelect:{type:Function},customizeDayStyle:{type:Function},isRange:{type:Boolean}},emits:["update:modelValue","select"],setup(n,{emit:t}){const a=n,s=t,h=e.ref(!1),D=e.ref(null),f=e.ref(void 0),c=e.ref(void 0),l=e.ref(void 0),S=i=>i&&typeof i=="object"&&"startDate"in i&&"endDate"in i,g=()=>{if(a.isRange){if(c.value&&l.value){const i=a.isHebrew?c.value.jewishDateStrHebrew:c.value.jewishDateStr,r=a.isHebrew?l.value.jewishDateStrHebrew:l.value.jewishDateStr;return`${i} - ${r}`}else if(c.value)return a.isHebrew?c.value.jewishDateStrHebrew:c.value.jewishDateStr;return""}else if(f.value)return a.isHebrew?f.value.jewishDateStrHebrew:f.value.jewishDateStr;return""},p=e.ref(g());e.watch([()=>a.modelValue,()=>a.isHebrew,()=>a.isRange],()=>{u()},{deep:!0});const u=()=>{const i=a.modelValue;if(a.isRange)if(S(i)){const r=i,m=r.startDate instanceof Date?r.startDate:J(r.startDate),b=r.endDate instanceof Date?r.endDate:J(r.endDate);c.value={jewishDateStr:d.formatJewishDate(B(m)),jewishDateStrHebrew:d.formatJewishDateInHebrew(B(m)),jewishDate:B(m),date:m},l.value={jewishDateStr:d.formatJewishDate(B(b)),jewishDateStrHebrew:d.formatJewishDateInHebrew(B(b)),jewishDate:B(b),date:b}}else c.value=void 0,l.value=void 0;else if(i&&!S(i)){const r=i,m=r instanceof Date?r:J(r);f.value={jewishDateStr:d.formatJewishDate(B(m)),jewishDateStrHebrew:d.formatJewishDateInHebrew(B(m)),jewishDate:B(m),date:m}}else f.value=void 0;p.value=g()},w=(i,r,m=!0)=>{a.isRange?(c.value=i,l.value=r,r?(s("update:modelValue",{startDate:i.jewishDate,endDate:r.jewishDate}),s("select",i,r),m&&(h.value=!1)):(s("update:modelValue",i),s("select",i))):(f.value=i,s("update:modelValue",i.jewishDate),s("select",i),m&&(h.value=!1)),p.value=g()},k=()=>{h.value=!h.value},N=i=>{D.value&&!D.value.contains(i.target)&&(h.value=!1)};e.onMounted(()=>{document.addEventListener("click",N),u()}),e.onUnmounted(()=>{document.removeEventListener("click",N)});const C=e.computed(()=>`hebrew-date-picker${a.isHebrew?" is-hebrew":""}`);return(i,r)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"pickerRef",ref:D,class:e.normalizeClass(C.value)},[e.createElementVNode("div",{class:"selected-date",onClick:e.withModifiers(k,["stop"])},[r[2]||(r[2]=e.createStaticVNode('<svg class="calendar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>',1)),e.createElementVNode("span",ye,e.toDisplayString(p.value||(n.isHebrew?"בחר תאריך":"Select date")),1)]),e.createElementVNode("div",{class:e.normalizeClass(["month-wrapper",{open:h.value}]),onClick:r[1]||(r[1]=e.withModifiers(()=>{},["stop"]))},[e.createVNode(me,{value:n.modelValue,"is-hebrew":n.isHebrew,"is-range":n.isRange,"can-select":n.canSelect,"customize-day-style":n.customizeDayStyle,onSelect:r[0]||(r[0]=(m,b)=>w(m,b))},null,8,["value","is-hebrew","is-range","can-select","customize-day-style"])],2)],2))}}),fe={install(n){n.component("HebrewDatePicker",W)}};y.HebrewDatePicker=W,y.IsJewishDatesEqual=O,y.default=fe,y.dontSelectHolidays=F,y.dontSelectShabat=j,y.dontSelectShabatAndHolidays=G,y.getGregDate=J,y.getJewishDate=B,y.getJewishMonth=z,y.getJewishMonths=V,y.getJewishYears=_,y.getNextMonth=I,y.getPrevMonth=$,y.getWeekdays=x,Object.defineProperties(y,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})}));
